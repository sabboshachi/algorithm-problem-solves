<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=utf-8"><META NAME="viewport" CONTENT="width=768"><META HTTP-EQUIV="X-UA-Compatible" CONTENT="IE=edge"><TITLE>2112. Battle log @ Timus Online Judge</TITLE><LINK REL="alternate" HREFLANG="x-default" HREF="/problem.aspx?space=1&amp;num=2112"><LINK REL="alternate" HREFLANG="en-us" HREF="/problem.aspx?space=1&amp;num=2112&amp;locale=en"><LINK REL="alternate" HREFLANG="ru-ru" HREF="/problem.aspx?space=1&amp;num=2112&amp;locale=ru"><LINK REL="stylesheet" TYPE="text/css" HREF="/style58.css"><LINK REL="shortcut icon" TYPE="image/x-icon" HREF="/favicon.ico"></HEAD><BODY><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="body"><TR><TD CLASS="caption"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" CLASS="locale"><A HREF="/problem.aspx?space=1&amp;num=2112&amp;locale=en">ENG</A>&nbsp;&nbsp;<A HREF="/problem.aspx?space=1&amp;num=2112&amp;locale=ru">RUS</A></TD><TD CLASS="title"><A HREF="/">Timus Online Judge</A></TD><TD WIDTH="130"></TD></TR></TABLE></TD></TR><TR><TD CLASS="panel"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" VALIGN="TOP" ALIGN="CENTER" STYLE="padding-bottom:5px;"><A HREF="/"><IMG BORDER="0" SRC="/images/usu-summer.jpg" HEIGHT="134" WIDTH="106" ALT=""></A></TD><TD VALIGN="TOP" ALIGN="LEFT"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="panel"><TR><TH WIDTH="25%"><DIV>Online Judge</DIV></TH><TH WIDTH="25%"><DIV>Problems</DIV></TH><TH WIDTH="25%"><DIV>Authors</DIV></TH><TH WIDTH="25%"><DIV>Online contests</DIV></TH></TR><TR><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/">About Online Judge</A><BR><A HREF="/help.aspx?topic=faq">Frequently asked questions</A><BR><A HREF="/news.aspx">Site news</A><BR><A HREF="/forum/">Webboard</A><BR><A HREF="/help.aspx?topic=links">Links</A><BR></TD><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/problemset.aspx">Problem set</A><BR><A HREF="/submit.aspx">Submit solution</A><BR><A HREF="/status.aspx">Judge status</A><BR><A HREF="/help.aspx?topic=judge">Guide</A><BR></TD><TD VALIGN="TOP"><A HREF="/register.aspx">Register</A><BR><A HREF="/authedit.aspx">Update your info</A><BR><A HREF="/ranklist.aspx">Authors ranklist</A><BR><FORM ACTION="/search.aspx" METHOD="GET" STYLE="margin-top:0.6em;"><INPUT NAME="Str" SIZE="12" VALUE="" PLACEHOLDER="Author’s name"> <INPUT TYPE="SUBMIT" VALUE="Search"></FORM></TD><TD VALIGN="TOP"><A HREF="/contest.aspx">Current contest</A><BR><A HREF="/schedule.aspx">Scheduled contests</A><BR><A HREF="/archive.aspx">Past contests</A><BR><A HREF="/help.aspx?topic=contest">Rules</A><BR></TD></TR></TABLE></TD></TR></TABLE></TD></TR><TR><TD STYLE="padding-top: 32px; padding-bottom: 20px;"><TABLE ALIGN="CENTER" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="800"><DIV CLASS="problem_content"><H2 class="problem_title">2112. Battle log</H2><DIV class="problem_limits">Time limit: 1.0 second<BR>Memory limit: 256 MB<BR></DIV><DIV ID="problem_text"><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Not so long ago a qualification round for the world tournament in popular game PKBG took place. In order to determine the participants who passed qualification round, organizers asked them to provide a log of a qualification battle.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">There are multiple teams in the battle. Each team has exactly 4 members. The total number of participants is <i>n</i> (it is guaranteed that <i>n</i> is divisible by 4). For the sake of anonymity, the identities of members of the teams are not disclosed.
There are in total 3 different types of events in the logs:
<ul>
<li> <i>X</i> HIT <i>Y</i> IN BODY/HEAD&nbsp;&mdash; player <i>X</i> hit player <i>Y</i> in the body/head;
<li> <i>X</i> USES MEDKIT&nbsp;&mdash; player <i>X</i> uses a medical kit and gets fully healed;
<li> <i>X</i> REVIVE <i>Y</i>&nbsp;&mdash; player <i>X</i> revives player <i>Y</i>.
</ul></DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Every player has 4 conditions: &ldquo;healthy&rdquo;, &ldquo;injured&rdquo;, &ldquo;at death’s door&rdquo; and &ldquo;dead&rdquo;. Let’s numerate the condition of players from 3 to 0 in the same order they were described before. When hit in the body or the head, the condition of a player changes to <i>max</i>(0, <i>cur</i> &minus; 1) and <i>max</i>(0, <i>cur</i> &minus; 2) correspondingly, where <i>cur</i> is the current condition of a player. Using a medical kit makes player healthy. Revival changes player’s condition from &ldquo;at death’s door&rdquo; to &ldquo;injured&rdquo;. In the beginning all the players are healthy. You may assume that no player ever runs out of ammunition or medical kits.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">There are also some strict rules in the game:
<ul>
<li> Only healthy or injured player can hit other players, use medical kit and revive other players;
<li> Players can only revive their teammates who are in the condition &ldquo;at death’s door&rdquo;;
<li> Every player is part of a team containing 4 players in total.
</ul></DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">If any rule was violated, logs are considered fake. Any events not restricted by the rules are possible. For example, a player may accidentally hit his teammate or even himself.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">There is not much time before the start of the world tournament. You, as a lead software engineer, have to verify the correctness of the logs and predict possible teams. If there are several ways to compose teams in a correct way, you may output any of them.</DIV></DIV><H3 CLASS="problem_subtitle">Input</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">The first line contains a single integer <i>n</i> (4 &le; <i>n</i> &le; 1000)&nbsp;&mdash; the total number of players. Each of the next <i>n</i> lines contains a name of a player. Each name is a string, containing lowercase and uppercase English letters. Length of each name does not exceed 20. All the names are different. The next line contains a single integer <i>m</i> (0 &le; <i>m</i> &le; 10<sup>4</sup>)&nbsp;&mdash; the number of events in the battle log. The next <i>m</i> lines contain event descriptions in the format defined before. It is guaranteed that the event descriptions strictly follow the format.</DIV></DIV><H3 CLASS="problem_subtitle">Output</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Output &ldquo;FAKE&rdquo; (without quotes), if logs are fake, otherwise output &ldquo;CORRECT&rdquo; (without quotes), and in the next  <i>n / 4</i> lines output any possible way to compose teams, 4 names in each line. Names in the same line should be separated with a space.</DIV></DIV><H3 CLASS="problem_subtitle">Samples</H3><TABLE CLASS="sample"><TR><TH WIDTH="350">input</TH><TH WIDTH="350">output</TH></TR><TR><TD><PRE>8
Shroud
Forsen
Wycc
Ragyra
BeastQT
Lirik
Asmadey
Ninja
12
Wycc HIT Shroud IN BODY
Shroud HIT Wycc IN HEAD
Ragyra REVIVE Wycc
Wycc USES MEDKIT
Lirik HIT BeastQT IN BODY
Asmadey HIT BeastQT IN BODY
Asmadey REVIVE BeastQT
Ragyra HIT Forsen IN HEAD
Shroud REVIVE Forsen
BeastQT HIT Shroud IN HEAD
Wycc HIT Forsen IN HEAD
Ninja HIT BeastQT IN HEAD
</PRE></TD><TD><PRE>CORRECT
Wycc Ragyra BeastQT Asmadey
Lirik Ninja Shroud Forsen</PRE></TD></TR><TR><TD><PRE>8
Shroud
Forsen
Wycc
Ragyra
BeastQT
Lirik
Asmadey
Ninja
8
Shroud HIT Wycc IN HEAD
Shroud HIT Ragyra IN HEAD
Shroud HIT BeastQT IN HEAD
Shroud HIT Asmadey IN HEAD
Lirik REVIVE Wycc
Lirik REVIVE Ragyra
Lirik REVIVE BeastQT
Lirik REVIVE Asmadey
</PRE></TD><TD><PRE>FAKE</PRE></TD></TR><TR><TD><PRE>4
Shroud
Forsen
Wycc
Ragyra
3
Shroud HIT Wycc IN HEAD
Wycc HIT Shroud IN HEAD
Wycc HIT Shroud IN BODY
</PRE></TD><TD><PRE>FAKE</PRE></TD></TR></TABLE><DIV CLASS="problem_source"><B>Problem Author: </B>Ivan Sychev<BR><B>Problem Source: </B>University academic school olympiad in informatics 2019<BR></DIV></DIV></DIV><DIV><B>Tags: </B>none  <SPAN CLASS="problem_tags_toggle">(<FORM METHOD="POST" ACTION="problem.aspx?space=1&amp;num=2112" STYLE="display:inline;" ID="ToggleTagsForm"><A HREF="problem.aspx?space=1&amp;num=2112" ONCLICK="document.getElementById('ToggleTagsForm').submit();return false;"><INPUT TYPE="hidden" NAME="Action" VALUE="HideTags">hide tags for unsolved problems</A></FORM>)</SPAN></DIV><DIV CLASS="problem_links"><SPAN>Difficulty: 542</SPAN>    <A HREF="print.aspx?space=1&amp;num=2112" TARGET="_blank">Printable version</A>    <A HREF="submit.aspx?space=1&amp;num=2112">Submit solution</A>    <A HREF="forum/?space=1&amp;num=2112">Discussion (8)</A><BR><A HREF="status.aspx?space=1&amp;num=2112">All submissions (604)</A>    <A HREF="status.aspx?space=1&amp;num=2112&amp;status=accepted">All accepted submissions (141)</A>    <A HREF="rating.aspx?space=1&amp;num=2112">Solutions rating (122)</A></DIV></TD></TR></TABLE></TD></TR><TR><TD CLASS="footer"><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""></div></noscript>© 2000–2020 <A HREF="/team.aspx">Timus Online Judge Team</A>. All rights reserved.</TD></TR></TABLE></BODY></HTML>